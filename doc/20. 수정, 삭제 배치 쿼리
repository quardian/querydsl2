┌────────────────────────────────────────────────────────────────────────────────────────────────────┐
    수정, 삭제 배치 쿼리
└────────────────────────────────────────────────────────────────────────────────────────────────────┘

    [쿼리 한번으로 대량 데이터 수정]
        - 필드값에 연산
            member.age.add(1)       ==> age = age + 1
            member.age.add(-1)      ==> age = age - 1
            member.age.multiply(2)  ==> age = age * 2
            member.age.divide(2)    ==> age = age / 2
    ┌────────────────────────────────────────────────────────────────────────────────────────────────────┐
        long affected = queryFactory
                .update(member)
                    .set(member.username, "비회원")
                    .set(member.age, member.age.add(1))
                .where(member.age.gt(10))
                .execute();

        // 벌크 연산 후, 영속성 컨텍스트 초기화 필요
        em.flush();
        em.clear();

        [SQL]
        update
            member
        set
            username='비회원',
            age=age+1
        where
            age>10
    └────────────────────────────────────────────────────────────────────────────────────────────────────┘

    ┌────────────────────────────────────────────────────────────────────────────────────────────────────┐
        long affected = queryFactory
                .update(member)
                .set(
                        Arrays.asList(
                                member.username,
                                member.age
                        ),
                        Arrays.asList(
                                "비회원",
                                //member.age.add(1) <== 이게 안되네..
                                30
                        )
                )
                .where(member.age.gt(10))
                .execute();
    └────────────────────────────────────────────────────────────────────────────────────────────────────┘

    [쿼리 한번으로 대량 데이터 삭제]

    ┌────────────────────────────────────────────────────────────────────────────────────────────────────┐
        long affected = queryFactory
                .delete(member)
                .where(member.age.gt(10))
                .execute();

        System.out.println("affected = " + affected);

        // 벌크 연산 후, 영속성 컨텍스트 초기화 필요
        em.flush();
        em.clear();
    └────────────────────────────────────────────────────────────────────────────────────────────────────┘


